<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClinicFlow Pro - Complete Clinic Management System</title>
    
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --primary-light: #3b82f6;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f3f4f6;
            --gray: #6b7280;
            --border: #e5e7eb;
            --success: #10b981;
            --white: #ffffff;
            --shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }

        /* Auth Container */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .auth-card {
            display: flex;
            width: 1000px;
            max-width: 100%;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .auth-left {
            flex: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 50px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .auth-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
        }

        .auth-content {
            position: relative;
            color: white;
            z-index: 1;
        }

        .auth-content h2 {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .auth-content p {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .feature-item i {
            color: var(--secondary);
        }

        .auth-right {
            flex: 1;
            padding: 50px;
            background: white;
        }

        .auth-form-container {
            max-width: 350px;
            margin: 0 auto;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h3 {
            font-size: 28px;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .auth-header p {
            color: var(--gray);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .input-group i:first-child {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
        }

        .input-group select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: var(--gray);
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .auth-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
        }

        .switch-btn {
            background: none;
            border: none;
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
        }

        /* Admin Panel */
        .admin-container {
            display: flex;
            min-height: 100vh;
            background: var(--light);
        }

        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, var(--dark) 0%, #111827 100%);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: all 0.3s;
            z-index: 100;
        }

        .logo {
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .logo i {
            font-size: 28px;
            color: var(--primary-light);
        }

        .logo h2 {
            font-size: 20px;
            font-weight: 700;
        }

        .logo span {
            color: var(--primary-light);
        }

        .user-profile {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .profile-image i {
            font-size: 50px;
            color: var(--primary-light);
        }

        .profile-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .profile-info p {
            font-size: 12px;
            opacity: 0.7;
        }

        .nav-menu {
            padding: 20px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 25px;
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            transition: all 0.3s;
            position: relative;
            cursor: pointer;
        }

        .nav-item i {
            width: 20px;
            font-size: 18px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .nav-item.active {
            background: linear-gradient(90deg, var(--primary) 0%, transparent 100%);
            color: white;
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        .upgrade-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .upgrade-card i {
            color: var(--warning);
            font-size: 24px;
        }

        .logout-btn {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: var(--danger);
        }

        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }

        .page-title h1 {
            font-size: 24px;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .page-title p {
            color: var(--gray);
            font-size: 14px;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--light);
            padding: 10px 15px;
            border-radius: 10px;
        }

        .search-box i {
            color: var(--gray);
        }

        .search-box input {
            border: none;
            background: none;
            outline: none;
            width: 250px;
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .notification-btn {
            background: var(--light);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }

        .notification-btn:hover {
            background: var(--primary);
            color: white;
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .welcome-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 30px;
            border-radius: 20px;
            color: white;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .welcome-content h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .welcome-content span {
            font-weight: 700;
        }

        .stat-badge {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-left: 10px;
            font-size: 14px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .stat-details h3 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .stat-details p {
            color: var(--gray);
            margin-bottom: 5px;
            font-size: 14px;
        }

        .stat-trend {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 20px;
        }

        .analytics-preview {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .preview-header h3 {
            font-size: 18px;
        }

        .view-all {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
            font-size: 14px;
        }

        .preview-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .chart-container {
            height: 300px;
        }

        .recent-activity {
            background: white;
            padding: 25px;
            border-radius: 15px;
        }

        .recent-activity h3 {
            font-size: 18px;
            margin-bottom: 15px;
        }

        .activity-list {
            margin-top: 20px;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 36px;
            height: 36px;
            background: var(--light);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 16px;
        }

        .activity-details {
            flex: 1;
        }

        .activity-details h4 {
            font-size: 13px;
            margin-bottom: 3px;
        }

        .activity-details p {
            font-size: 11px;
            color: var(--gray);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h2 {
            font-size: 20px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 13px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
        }

        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .filter-group, .search-group {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 8px 12px;
            border-radius: 8px;
            flex: 1;
        }

        .filter-group i, .search-group i {
            font-size: 14px;
            color: var(--gray);
        }

        .filter-group select, .search-group input {
            border: none;
            outline: none;
            width: 100%;
            background: none;
            font-size: 13px;
        }

        .table-container {
            background: white;
            border-radius: 12px;
            overflow-x: auto;
            box-shadow: var(--shadow);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--light);
            padding: 10px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .data-table td {
            padding: 8px 12px;
            border-bottom: 1px solid var(--border);
            font-size: 12px;
        }

        .data-table tbody tr:hover {
            background: var(--light);
        }

        .data-table td small {
            font-size: 10px;
            color: var(--gray);
        }

        .status {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 500;
            display: inline-block;
        }

        .status.active {
            background: #d1fae5;
            color: var(--success);
        }

        .status.inactive {
            background: #fee2e2;
            color: var(--danger);
        }

        .status.paid {
            background: #d1fae5;
            color: var(--success);
        }

        .btn-icon {
            background: none;
            border: none;
            cursor: pointer;
            margin: 0 3px;
            font-size: 12px;
            color: var(--gray);
            transition: all 0.2s;
            padding: 5px;
            border-radius: 4px;
        }

        .btn-icon:hover {
            color: var(--primary);
            background: var(--light);
        }

        .btn-icon.delete:hover {
            color: var(--danger);
        }

        .btn-icon.edit:hover {
            color: var(--primary);
        }

        .btn-icon.view:hover {
            color: var(--secondary);
        }

        .analytics-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            font-size: 13px;
        }

        .date-range {
            display: flex;
            gap: 10px;
        }

        .range-btn {
            padding: 6px 16px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .range-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .custom-date {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .custom-date input {
            padding: 6px 10px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 12px;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .kpi-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .kpi-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .kpi-info h3 {
            font-size: 13px;
            color: var(--gray);
            margin-bottom: 5px;
            font-weight: 500;
        }

        .kpi-value {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .kpi-change {
            font-size: 11px;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-header h3 {
            font-size: 16px;
        }

        .analytics-tables {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }

        .table-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
        }

        .table-card h3 {
            margin-bottom: 15px;
            font-size: 16px;
        }

        .mini-table {
            width: 100%;
        }

        .mini-table td {
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 12px;
        }

        .plans-toggle {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }

        .toggle-btn {
            padding: 10px 25px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            font-size: 13px;
        }

        .toggle-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .save-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--success);
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 20px;
        }

        .plans-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .plan-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            position: relative;
            transition: all 0.3s;
        }

        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .plan-card.featured {
            border: 2px solid var(--primary);
            transform: scale(1.03);
        }

        .popular-badge {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 4px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        .plan-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--light);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        .plan-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .plan-header i {
            font-size: 36px;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .plan-header h3 {
            font-size: 20px;
        }

        .plan-price {
            text-align: center;
            margin-bottom: 20px;
        }

        .currency {
            font-size: 16px;
            vertical-align: top;
        }

        .amount {
            font-size: 36px;
            font-weight: 700;
        }

        .period {
            color: var(--gray);
            font-size: 12px;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 25px;
        }

        .plan-features li {
            padding: 6px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .plan-features li i {
            width: 16px;
            font-size: 12px;
        }

        .plan-btn {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
        }

        .plan-btn:hover {
            background: var(--primary);
            color: white;
        }

        .plan-btn.active {
            background: var(--primary);
            color: white;
        }

        .billing-history {
            background: white;
            padding: 25px;
            border-radius: 15px;
        }

        .billing-history h3 {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .system-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }

        .system-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
        }

        .system-card.full-width {
            grid-column: span 2;
        }

        .system-card h3 {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-badge.online {
            background: #d1fae5;
            color: var(--success);
        }

        .server-metrics {
            margin-bottom: 20px;
        }

        .metric {
            margin-bottom: 15px;
        }

        .metric-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .progress-bar {
            height: 6px;
            background: var(--light);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 3px;
            transition: width 0.3s;
        }

        .server-details {
            display: flex;
            gap: 20px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .active-users {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .user-type {
            text-align: center;
        }

        .user-type i {
            font-size: 20px;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .count {
            font-size: 20px;
            font-weight: 700;
            display: block;
        }

        .label {
            font-size: 11px;
            color: var(--gray);
        }

        .user-activity-chart {
            height: 180px;
        }

        .logs-container {
            max-height: 250px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 6px 10px;
            border-bottom: 1px solid var(--border);
            font-size: 11px;
        }

        .log-entry.info {
            color: var(--primary);
        }

        .log-entry.success {
            color: var(--success);
        }

        .log-entry.warning {
            color: var(--warning);
        }

        .log-entry.error {
            color: var(--danger);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            width: 500px;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 18px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 22px;
            cursor: pointer;
            color: var(--gray);
        }

        .modal form {
            padding: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 13px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 13px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .form-actions button {
            flex: 1;
            padding: 10px;
            font-size: 13px;
        }

        .notification-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 320px;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            display: none;
            z-index: 1000;
        }

        .notification-panel.active {
            display: block;
        }

        .notification-header {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-header h3 {
            font-size: 16px;
        }

        .mark-all-read {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 12px;
        }

        .notification-list {
            max-height: 350px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 10px;
            font-size: 12px;
        }

        .notification-item.unread {
            background: var(--light);
        }

        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .menu-toggle {
                display: block;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }

            .analytics-tables {
                grid-template-columns: 1fr;
            }

            .system-grid {
                grid-template-columns: 1fr;
            }

            .system-card.full-width {
                grid-column: span 1;
            }
        }

        @media (max-width: 768px) {
            .auth-card {
                flex-direction: column;
            }

            .auth-left {
                display: none;
            }

            .header {
                flex-direction: column;
                gap: 15px;
            }

            .header-right {
                width: 100%;
            }

            .search-box {
                flex: 1;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .filters {
                flex-direction: column;
            }

            .date-range {
                flex-wrap: wrap;
            }

            .custom-date {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="auth-container">
        <div class="auth-card">
            <div class="auth-left">
                <div class="auth-overlay"></div>
                <div class="auth-content">
                    <h2>Welcome to ClinicFlow Pro</h2>
                    <p>Complete clinic management solution for modern healthcare</p>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Manage Doctors & Staff</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Real-time Analytics</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Subscription Management</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>System Monitoring</span>
                    </div>
                </div>
            </div>
            <div class="auth-right">
                <div class="auth-form-container">
                    <div class="auth-header">
                        <h3 id="authTitle">Sign In</h3>
                        <p id="authSubtitle">Access your clinic dashboard</p>
                    </div>
                    
                    <!-- Login Form -->
                    <form id="loginForm" class="auth-form active">
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="loginEmail" placeholder="Email address" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="loginPassword" placeholder="Password" required>
                            <i class="fas fa-eye toggle-password" onclick="togglePassword('loginPassword')"></i>
                        </div>
                        <div class="form-options">
                            <label class="checkbox-container">
                                <input type="checkbox" id="rememberMe">
                                Remember me
                            </label>
                            <a href="#" id="forgotPassword">Forgot Password?</a>
                        </div>
                        <button type="submit" class="auth-btn" id="loginBtn">
                            <span>Sign In</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </form>

                    <!-- Signup Form -->
                    <form id="signupForm" class="auth-form">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="signupName" placeholder="Full name" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="signupEmail" placeholder="Email address" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="signupPassword" placeholder="Password" required>
                            <i class="fas fa-eye toggle-password" onclick="togglePassword('signupPassword')"></i>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="signupConfirmPassword" placeholder="Confirm password" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-user-tag"></i>
                            <select id="signupRole" required>
                                <option value="">Select Role</option>
                                <option value="admin">Admin</option>
                                <option value="doctor">Doctor</option>
                                <option value="receptionist">Receptionist</option>
                                <option value="patient">Patient</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-clinic-medical"></i>
                            <input type="text" id="signupClinic" placeholder="Clinic name" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-phone"></i>
                            <input type="tel" id="signupPhone" placeholder="Phone number" required>
                        </div>
                        <button type="submit" class="auth-btn" id="signupBtn">
                            <span>Create Account</span>
                            <i class="fas fa-user-plus"></i>
                        </button>
                    </form>

                    <div class="auth-switch">
                        <p id="switchText">Don't have an account?</p>
                        <button id="switchToSignup" class="switch-btn">Sign Up</button>
                        <button id="switchToLogin" class="switch-btn" style="display: none;">Sign In</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-container" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <i class="fas fa-clinic-medical"></i>
                <h2>Clinic<span>Flow</span></h2>
            </div>
            
            <div class="user-profile">
                <div class="profile-image">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-info">
                    <h4 id="userName">Admin User</h4>
                    <p id="userEmail">admin@clinic.com</p>
                    <p id="userRole" style="font-size: 11px; opacity: 0.7;">Admin</p>
                </div>
            </div>

            <nav class="nav-menu">
                <div class="nav-item active" onclick="showSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="showSection('doctors')">
                    <i class="fas fa-user-md"></i>
                    <span>Doctors</span>
                </div>
                <div class="nav-item" onclick="showSection('receptionists')">
                    <i class="fas fa-user-tie"></i>
                    <span>Receptionists</span>
                </div>
                <div class="nav-item" onclick="showSection('analytics')">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </div>
                <div class="nav-item" onclick="showSection('subscriptions')">
                    <i class="fas fa-credit-card"></i>
                    <span>Subscriptions</span>
                </div>
                <div class="nav-item" onclick="showSection('system')">
                    <i class="fas fa-server"></i>
                    <span>System</span>
                </div>
            </nav>

            <div class="sidebar-footer">
                
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="menu-toggle" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="page-title">
                        <h1 id="currentPageTitle">Dashboard</h1>
                        <p id="currentDate"></p>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search..." id="globalSearch" onkeyup="handleSearch()">
                    </div>
                    
                    <div class="header-actions">
                        <button class="notification-btn" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                            <span class="badge" id="notificationBadge">3</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content Sections -->
            <div class="content-sections">
                <!-- Dashboard Section -->
                <section id="dashboard" class="section active">
                    <div class="welcome-card">
                        <div class="welcome-content">
                            <h2>Welcome back, <span id="welcomeName">Admin</span>! ðŸ‘‹</h2>
                            <p>Here's what's happening with your clinic today.</p>
                        </div>
                        <div class="welcome-stats">
                            <div class="stat-badge">
                                <i class="fas fa-calendar-check"></i>
                                <span id="todayAppointments">0</span> Appointments
                            </div>
                            <div class="stat-badge">
                                <i class="fas fa-clock"></i>
                                <span id="pendingTasks">0</span> Pending
                            </div>
                        </div>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-md"></i>
                            </div>
                            <div class="stat-details">
                                <h3 id="totalDoctors">0</h3>
                                <p>Total Doctors</p>
                                <span class="stat-trend positive">
                                    <i class="fas fa-arrow-up"></i> +0%
                                </span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="stat-details">
                                <h3 id="totalReceptionists">0</h3>
                                <p>Receptionists</p>
                                <span class="stat-trend positive">
                                    <i class="fas fa-arrow-up"></i> +0%
                                </span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-details">
                                <h3 id="todayAppointmentsStat">0</h3>
                                <p>Today's Appointments</p>
                                <span class="stat-trend positive">
                                    <i class="fas fa-arrow-up"></i> +0%
                                </span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-details">
                                <h3 id="totalPatients">0</h3>
                                <p>Total Patients</p>
                                <span class="stat-trend positive">
                                    <i class="fas fa-arrow-up"></i> +0%
                                </span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-details">
                                <h3 id="monthlyRevenue">$0</h3>
                                <p>Monthly Revenue</p>
                                <span class="stat-trend positive">
                                    <i class="fas fa-arrow-up"></i> +0%
                                </span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-server"></i>
                            </div>
                            <div class="stat-details">
                                <h3 id="systemUptime">0%</h3>
                                <p>System Uptime</p>
                                <span class="stat-trend positive">
                                    <i class="fas fa-check-circle"></i> Stable
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Preview -->
                    <div class="analytics-preview">
                        <div class="preview-header">
                            <h3>Quick Analytics</h3>
                            <a href="#" onclick="showSection('analytics'); return false;" class="view-all">View Full Analytics <i class="fas fa-arrow-right"></i></a>
                        </div>
                        <div class="preview-charts">
                            <div class="chart-container">
                                <canvas id="dashboardVisitsChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <canvas id="dashboardRevenueChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="recent-activity">
                        <h3>Recent Activity</h3>
                        <div class="activity-list" id="activityList">
                            <!-- Dynamic content will be inserted here -->
                        </div>
                    </div>
                </section>

                <!-- Manage Doctors Section -->
                <section id="doctors" class="section">
                    <div class="section-header">
                        <h2>Manage Doctors</h2>
                        <button class="btn-primary" onclick="openModal('addDoctorModal')">
                            <i class="fas fa-plus"></i> Add New Doctor
                        </button>
                    </div>
                    
                    <div class="filters">
                        <div class="filter-group">
                            <i class="fas fa-filter"></i>
                            <select class="filter-select" id="doctorDepartmentFilter" onchange="filterDoctors()">
                                <option value="">All Departments</option>
                                <option value="Cardiology">Cardiology</option>
                                <option value="Neurology">Neurology</option>
                                <option value="Pediatrics">Pediatrics</option>
                                <option value="Orthopedics">Orthopedics</option>
                                <option value="Dermatology">Dermatology</option>
                            </select>
                        </div>
                        <div class="search-group">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search doctors..." id="doctorSearch" class="search-input" onkeyup="searchDoctors()">
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table" id="doctorsTable">
                            <thead>
                                <tr>
                                    <th>Doctor</th>
                                    <th>Department</th>
                                    <th>Specialization</th>
                                    <th>Contact</th>
                                    <th>Experience</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="doctorsTableBody">
                                <!-- Dynamic content will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Manage Receptionists Section -->
                <section id="receptionists" class="section">
                    <div class="section-header">
                        <h2>Manage Receptionists</h2>
                        <button class="btn-primary" onclick="openModal('addReceptionistModal')">
                            <i class="fas fa-plus"></i> Add Receptionist
                        </button>
                    </div>
                    
                    <div class="filters">
                        <div class="filter-group">
                            <i class="fas fa-filter"></i>
                            <select class="filter-select" id="receptionistShiftFilter" onchange="filterReceptionists()">
                                <option value="">All Shifts</option>
                                <option value="Morning">Morning</option>
                                <option value="Evening">Evening</option>
                                <option value="Night">Night</option>
                            </select>
                        </div>
                        <div class="search-group">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search receptionists..." id="receptionistSearch" class="search-input" onkeyup="searchReceptionists()">
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Shift</th>
                                    <th>Join Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="receptionistsTableBody">
                                <!-- Dynamic content will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Analytics Section -->
                <section id="analytics" class="section">
                    <h2>Analytics Dashboard</h2>
                    
                    <!-- Date Range Selector -->
                    <div class="analytics-controls">
                        <div class="date-range">
                            <button class="range-btn active" onclick="changeDateRange('week')">Week</button>
                            <button class="range-btn" onclick="changeDateRange('month')">Month</button>
                            <button class="range-btn" onclick="changeDateRange('quarter')">Quarter</button>
                            <button class="range-btn" onclick="changeDateRange('year')">Year</button>
                        </div>
                        <div class="custom-date">
                            <input type="date" id="startDate">
                            <span>to</span>
                            <input type="date" id="endDate">
                            <button class="btn-secondary" onclick="applyCustomDate()">Apply</button>
                        </div>
                    </div>

                    <!-- KPI Cards -->
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="kpi-info">
                                <h3>Appointments</h3>
                                <div class="kpi-value" id="totalAppointments">0</div>
                                <span class="kpi-change positive" id="appointmentChange">+0%</span>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="kpi-info">
                                <h3>Revenue</h3>
                                <div class="kpi-value" id="totalRevenue">$0</div>
                                <span class="kpi-change positive" id="revenueChange">+0%</span>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <div class="kpi-info">
                                <h3>New Patients</h3>
                                <div class="kpi-value" id="newPatients">0</div>
                                <span class="kpi-change positive" id="patientChange">+0%</span>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="kpi-info">
                                <h3>Satisfaction</h3>
                                <div class="kpi-value" id="satisfactionRate">0</div>
                                <span class="kpi-change positive" id="satisfactionChange">+0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Grid -->
                    <div class="analytics-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Patient Visits Overview</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="visitsChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Revenue Analysis</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Department Distribution</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="departmentChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Peak Hours</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="peakHoursChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Data Tables -->
                    <div class="analytics-tables">
                        <div class="table-card">
                            <h3>Top Performing Doctors</h3>
                            <table class="mini-table" id="topDoctorsTable">
                                <thead>
                                    <tr>
                                        <th>Doctor</th>
                                        <th>Patients</th>
                                        <th>Revenue</th>
                                    </tr>
                                </thead>
                                <tbody id="topDoctorsBody">
                                    <!-- Dynamic content will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-card">
                            <h3>Popular Departments</h3>
                            <table class="mini-table" id="popularDepartmentsTable">
                                <thead>
                                    <tr>
                                        <th>Department</th>
                                        <th>Appointments</th>
                                        <th>Growth</th>
                                    </tr>
                                </thead>
                                <tbody id="popularDepartmentsBody">
                                    <!-- Dynamic content will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Subscription Plans Section -->
                <section id="subscriptions" class="section">
                    <h2>Subscription Plans</h2>
                    
                    <div class="plans-toggle">
                        <button class="toggle-btn active" onclick="changeBillingPeriod('monthly')">Monthly</button>
                        <button class="toggle-btn" onclick="changeBillingPeriod('yearly')">Yearly <span class="save-badge">Save 20%</span></button>
                    </div>

                    <div class="plans-container">
                        <div class="plan-card">
                            <div class="plan-badge">Starter</div>
                            <div class="plan-header">
                                <i class="fas fa-rocket"></i>
                                <h3>Basic</h3>
                            </div>
                            <div class="plan-price">
                                <span class="currency">$</span>
                                <span class="amount" id="basicPrice">99</span>
                                <span class="period">/month</span>
                            </div>
                            <ul class="plan-features">
                                <li><i class="fas fa-check"></i> Up to 3 Doctors</li>
                                <li><i class="fas fa-check"></i> Basic Analytics</li>
                                <li><i class="fas fa-check"></i> Email Support</li>
                                <li><i class="fas fa-check"></i> 50GB Storage</li>
                            </ul>
                            <button class="plan-btn" onclick="selectPlan('basic')">Get Started</button>
                        </div>

                        <div class="plan-card featured">
                            <div class="popular-badge">Most Popular</div>
                            <div class="plan-header">
                                <i class="fas fa-crown"></i>
                                <h3>Professional</h3>
                            </div>
                            <div class="plan-price">
                                <span class="currency">$</span>
                                <span class="amount" id="professionalPrice">199</span>
                                <span class="period">/month</span>
                            </div>
                            <ul class="plan-features">
                                <li><i class="fas fa-check"></i> Up to 10 Doctors</li>
                                <li><i class="fas fa-check"></i> Advanced Analytics</li>
                                <li><i class="fas fa-check"></i> Priority Support</li>
                                <li><i class="fas fa-check"></i> 200GB Storage</li>
                                <li><i class="fas fa-check"></i> API Access</li>
                            </ul>
                            <button class="plan-btn active" onclick="selectPlan('professional')">Current Plan</button>
                        </div>

                        <div class="plan-card">
                            <div class="plan-header">
                                <i class="fas fa-building"></i>
                                <h3>Enterprise</h3>
                            </div>
                            <div class="plan-price">
                                <span class="currency">$</span>
                                <span class="amount" id="enterprisePrice">399</span>
                                <span class="period">/month</span>
                            </div>
                            <ul class="plan-features">
                                <li><i class="fas fa-check"></i> Unlimited Doctors</li>
                                <li><i class="fas fa-check"></i> Custom Analytics</li>
                                <li><i class="fas fa-check"></i> 24/7 Support</li>
                                <li><i class="fas fa-check"></i> 1TB Storage</li>
                                <li><i class="fas fa-check"></i> API Access</li>
                                <li><i class="fas fa-check"></i> Custom Reports</li>
                            </ul>
                            <button class="plan-btn" onclick="selectPlan('enterprise')">Contact Sales</button>
                        </div>
                    </div>

                    <div class="billing-history">
                        <h3>Billing History</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Invoice</th>
                                        <th>Plan</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="billingHistoryBody">
                                    <!-- Dynamic content will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- System Usage Section -->
                <section id="system" class="section">
                    <h2>System Usage Monitoring</h2>
                    
                    <div class="system-grid">
                        <div class="system-card">
                            <div class="card-header">
                                <h3>Server Status</h3>
                                <div class="status-badge online" id="serverStatus">
                                    <i class="fas fa-circle"></i> Online
                                </div>
                            </div>
                            <div class="server-metrics">
                                <div class="metric">
                                    <div class="metric-label">
                                        <span>CPU Usage</span>
                                        <span id="cpuUsage">0%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress" id="cpuProgress" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="metric">
                                    <div class="metric-label">
                                        <span>Memory Usage</span>
                                        <span id="memoryUsage">0%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress" id="memoryProgress" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="metric">
                                    <div class="metric-label">
                                        <span>Disk Usage</span>
                                        <span id="diskUsage">0%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress" id="diskProgress" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="server-details">
                                <div class="detail-item">
                                    <i class="fas fa-clock"></i>
                                    <span>Uptime: <strong id="uptime">0 days</strong></span>
                                </div>
                                <div class="detail-item">
                                    <i class="fas fa-globe"></i>
                                    <span>Response Time: <strong id="responseTime">0ms</strong></span>
                                </div>
                            </div>
                        </div>

                        <div class="system-card">
                            <h3>Active Users</h3>
                            <div class="active-users">
                                <div class="user-type">
                                    <i class="fas fa-user-md"></i>
                                    <div>
                                        <span class="count" id="activeDoctors">0</span>
                                        <span class="label">Doctors</span>
                                    </div>
                                </div>
                                <div class="user-type">
                                    <i class="fas fa-user-tie"></i>
                                    <div>
                                        <span class="count" id="activeReceptionists">0</span>
                                        <span class="label">Receptionists</span>
                                    </div>
                                </div>
                                <div class="user-type">
                                    <i class="fas fa-users"></i>
                                    <div>
                                        <span class="count" id="activePatients">0</span>
                                        <span class="label">Patients</span>
                                    </div>
                                </div>
                            </div>
                            <div class="user-activity-chart">
                                <canvas id="userActivityChart"></canvas>
                            </div>
                        </div>

                        <div class="system-card full-width">
                            <h3>System Logs</h3>
                            <div class="logs-container" id="logsContainer">
                                <!-- Dynamic logs will be inserted here -->
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Doctor Modal -->
    <div id="addDoctorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Doctor</h3>
                <button class="close-btn" onclick="closeModal('addDoctorModal')">&times;</button>
            </div>
            <form id="addDoctorForm" onsubmit="addDoctor(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="doctorName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="doctorEmail" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="doctorPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Department</label>
                        <select id="doctorDepartment" required>
                            <option value="">Select Department</option>
                            <option value="Cardiology">Cardiology</option>
                            <option value="Neurology">Neurology</option>
                            <option value="Pediatrics">Pediatrics</option>
                            <option value="Orthopedics">Orthopedics</option>
                            <option value="Dermatology">Dermatology</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Specialization</label>
                        <input type="text" id="doctorSpecialization" required>
                    </div>
                    <div class="form-group">
                        <label>Experience (Years)</label>
                        <input type="number" id="doctorExperience" min="0" required>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Add Doctor</button>
                    <button type="button" class="btn-secondary" onclick="closeModal('addDoctorModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Doctor Modal -->
    <div id="editDoctorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Doctor</h3>
                <button class="close-btn" onclick="closeModal('editDoctorModal')">&times;</button>
            </div>
            <form id="editDoctorForm" onsubmit="updateDoctor(event)">
                <input type="hidden" id="editDoctorId">
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="editDoctorName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="editDoctorEmail" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="editDoctorPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Department</label>
                        <select id="editDoctorDepartment" required>
                            <option value="">Select Department</option>
                            <option value="Cardiology">Cardiology</option>
                            <option value="Neurology">Neurology</option>
                            <option value="Pediatrics">Pediatrics</option>
                            <option value="Orthopedics">Orthopedics</option>
                            <option value="Dermatology">Dermatology</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Specialization</label>
                        <input type="text" id="editDoctorSpecialization" required>
                    </div>
                    <div class="form-group">
                        <label>Experience (Years)</label>
                        <input type="number" id="editDoctorExperience" min="0" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="editDoctorStatus" required>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="on leave">On Leave</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Update Doctor</button>
                    <button type="button" class="btn-secondary" onclick="closeModal('editDoctorModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- View Doctor Modal -->
    <div id="viewDoctorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Doctor Details</h3>
                <button class="close-btn" onclick="closeModal('viewDoctorModal')">&times;</button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-user-md" style="font-size: 60px; color: var(--primary);"></i>
                </div>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Name:</td>
                        <td style="padding: 10px;" id="viewDoctorName"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Email:</td>
                        <td style="padding: 10px;" id="viewDoctorEmail"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Phone:</td>
                        <td style="padding: 10px;" id="viewDoctorPhone"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Department:</td>
                        <td style="padding: 10px;" id="viewDoctorDepartment"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Specialization:</td>
                        <td style="padding: 10px;" id="viewDoctorSpecialization"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Experience:</td>
                        <td style="padding: 10px;" id="viewDoctorExperience"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Status:</td>
                        <td style="padding: 10px;" id="viewDoctorStatus"></td>
                    </tr>
                </table>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-secondary" onclick="closeModal('viewDoctorModal')">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Receptionist Modal -->
    <div id="addReceptionistModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Receptionist</h3>
                <button class="close-btn" onclick="closeModal('addReceptionistModal')">&times;</button>
            </div>
            <form id="addReceptionistForm" onsubmit="addReceptionist(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="receptionistName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="receptionistEmail" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="receptionistPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Shift</label>
                        <select id="receptionistShift" required>
                            <option value="">Select Shift</option>
                            <option value="Morning">Morning (8AM - 2PM)</option>
                            <option value="Evening">Evening (2PM - 8PM)</option>
                            <option value="Night">Night (8PM - 8AM)</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Add Receptionist</button>
                    <button type="button" class="btn-secondary" onclick="closeModal('addReceptionistModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Receptionist Modal -->
    <div id="editReceptionistModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Receptionist</h3>
                <button class="close-btn" onclick="closeModal('editReceptionistModal')">&times;</button>
            </div>
            <form id="editReceptionistForm" onsubmit="updateReceptionist(event)">
                <input type="hidden" id="editReceptionistId">
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="editReceptionistName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="editReceptionistEmail" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="editReceptionistPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Shift</label>
                        <select id="editReceptionistShift" required>
                            <option value="">Select Shift</option>
                            <option value="Morning">Morning (8AM - 2PM)</option>
                            <option value="Evening">Evening (2PM - 8PM)</option>
                            <option value="Night">Night (8PM - 8AM)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="editReceptionistStatus" required>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Update Receptionist</button>
                    <button type="button" class="btn-secondary" onclick="closeModal('editReceptionistModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- View Receptionist Modal -->
    <div id="viewReceptionistModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Receptionist Details</h3>
                <button class="close-btn" onclick="closeModal('viewReceptionistModal')">&times;</button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div style="text-align: center; margin-bottom: 20px;">
                    <i class="fas fa-user-tie" style="font-size: 60px; color: var(--primary);"></i>
                </div>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Name:</td>
                        <td style="padding: 10px;" id="viewReceptionistName"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Email:</td>
                        <td style="padding: 10px;" id="viewReceptionistEmail"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Phone:</td>
                        <td style="padding: 10px;" id="viewReceptionistPhone"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Shift:</td>
                        <td style="padding: 10px;" id="viewReceptionistShift"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Join Date:</td>
                        <td style="padding: 10px;" id="viewReceptionistJoinDate"></td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; font-weight: 600;">Status:</td>
                        <td style="padding: 10px;" id="viewReceptionistStatus"></td>
                    </tr>
                </table>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn-secondary" onclick="closeModal('viewReceptionistModal')">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Panel -->
    <div id="notificationPanel" class="notification-panel">
        <div class="notification-header">
            <h3>Notifications</h3>
            <button class="mark-all-read" onclick="markAllRead()">Mark all as read</button>
        </div>
        <div class="notification-list" id="notificationList">
            <!-- Dynamic notifications will be inserted here -->
        </div>
    </div>

    <script>
        // ==================== GLOBAL VARIABLES ====================
        let currentUser = null;
        let doctors = [
            { id: 1, name: 'Dr. John Smith', department: 'Cardiology', specialization: 'Interventional Cardiology', email: 'john.smith@clinic.com', phone: '123-456-7890', experience: 12, status: 'active' },
            { id: 2, name: 'Dr. Sarah Johnson', department: 'Neurology', specialization: 'Pediatric Neurology', email: 'sarah.johnson@clinic.com', phone: '123-456-7891', experience: 8, status: 'active' },
            { id: 3, name: 'Dr. Michael Brown', department: 'Pediatrics', specialization: 'General Pediatrics', email: 'michael.brown@clinic.com', phone: '123-456-7892', experience: 15, status: 'active' },
            { id: 4, name: 'Dr. Emily Davis', department: 'Orthopedics', specialization: 'Sports Medicine', email: 'emily.davis@clinic.com', phone: '123-456-7893', experience: 10, status: 'on leave' },
            { id: 5, name: 'Dr. David Wilson', department: 'Dermatology', specialization: 'Cosmetic Dermatology', email: 'david.wilson@clinic.com', phone: '123-456-7894', experience: 7, status: 'active' }
        ];
        
        let receptionists = [
            { id: 1, name: 'Emma Watson', email: 'emma.w@clinic.com', phone: '123-456-7800', shift: 'Morning', created_at: '2024-01-15', status: 'active' },
            { id: 2, name: 'James Lee', email: 'james.lee@clinic.com', phone: '123-456-7801', shift: 'Evening', created_at: '2024-02-01', status: 'active' },
            { id: 3, name: 'Maria Garcia', email: 'maria.g@clinic.com', phone: '123-456-7802', shift: 'Morning', created_at: '2024-02-15', status: 'active' },
            { id: 4, name: 'Robert Chen', email: 'robert.c@clinic.com', phone: '123-456-7803', shift: 'Night', created_at: '2024-03-01', status: 'active' }
        ];
        
        let notifications = [];
        let charts = {};

        // ==================== AUTHENTICATION FUNCTIONS ====================
        
        // Toggle between login and signup forms
        document.getElementById('switchToSignup').addEventListener('click', function() {
            document.getElementById('loginForm').classList.remove('active');
            document.getElementById('signupForm').classList.add('active');
            document.getElementById('authTitle').textContent = 'Create Account';
            document.getElementById('authSubtitle').textContent = 'Get started with your clinic';
            this.style.display = 'none';
            document.getElementById('switchToLogin').style.display = 'inline-block';
            document.getElementById('switchText').textContent = 'Already have an account?';
        });

        document.getElementById('switchToLogin').addEventListener('click', function() {
            document.getElementById('signupForm').classList.remove('active');
            document.getElementById('loginForm').classList.add('active');
            document.getElementById('authTitle').textContent = 'Sign In';
            document.getElementById('authSubtitle').textContent = 'Access your clinic dashboard';
            this.style.display = 'none';
            document.getElementById('switchToSignup').style.display = 'inline-block';
            document.getElementById('switchText').textContent = "Don't have an account?";
        });

        // Toggle password visibility
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
            input.setAttribute('type', type);
        }

        // Login function
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            
            // For demo purposes, create a demo user
            currentUser = {
                id: 'demo-user-id',
                email: email,
                name: email.split('@')[0]
            };
            
            // Update UI
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'flex';
            
            document.getElementById('userName').textContent = email.split('@')[0];
            document.getElementById('userEmail').textContent = email;
            document.getElementById('userRole').textContent = 'Admin';
            document.getElementById('welcomeName').textContent = email.split('@')[0];

            // Load initial data
            displayDoctors(doctors);
            displayReceptionists(receptionists);
            loadDashboardData();
            loadAnalytics();
            startSystemMonitoring();
            addNotification('Welcome back!', 'success');
        });

        // Signup function
        document.getElementById('signupForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const role = document.getElementById('signupRole').value;
            const clinic = document.getElementById('signupClinic').value;
            const phone = document.getElementById('signupPhone').value;

            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }

            if (!role) {
                alert('Please select a role');
                return;
            }

            // For demo purposes, create a demo user
            currentUser = {
                id: 'demo-user-id',
                email: email,
                name: name,
                role: role,
                clinic: clinic,
                phone: phone
            };
            
            alert('Account created successfully!');
            
            // Update UI
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'flex';
            
            document.getElementById('userName').textContent = name;
            document.getElementById('userEmail').textContent = email;
            document.getElementById('userRole').textContent = role.charAt(0).toUpperCase() + role.slice(1);
            document.getElementById('welcomeName').textContent = name.split(' ')[0];

            // Load initial data
            displayDoctors(doctors);
            displayReceptionists(receptionists);
            loadDashboardData();
            loadAnalytics();
            startSystemMonitoring();
            addNotification('Welcome to ClinicFlow Pro!', 'success');
        });

        // Logout function
        function logout() {
            currentUser = null;
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            
            // Clear forms
            document.getElementById('loginForm').reset();
            document.getElementById('signupForm').reset();
            
            // Switch to login form
            document.getElementById('loginForm').classList.add('active');
            document.getElementById('signupForm').classList.remove('active');
            document.getElementById('switchToSignup').style.display = 'inline-block';
            document.getElementById('switchToLogin').style.display = 'none';
            document.getElementById('switchText').textContent = "Don't have an account?";
        }

        // ==================== UI FUNCTIONS ====================

        // Show section
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('onclick')?.includes(sectionId)) {
                    item.classList.add('active');
                }
            });
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'doctors': 'Doctors Management',
                'receptionists': 'Receptionists Management',
                'analytics': 'Analytics',
                'subscriptions': 'Subscriptions',
                'system': 'System Usage'
            };
            document.getElementById('currentPageTitle').textContent = titles[sectionId];
            
            // Load section-specific data
            if (sectionId === 'analytics') {
                loadAnalytics();
            } else if (sectionId === 'subscriptions') {
                loadBillingHistory();
            }
        }

        // Toggle sidebar on mobile
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        // Update current date
        function updateDate() {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-US', options);
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            const form = document.getElementById(modalId).querySelector('form');
            if (form) form.reset();
        }

        // Toggle notifications
        function toggleNotifications() {
            document.getElementById('notificationPanel').classList.toggle('active');
        }

        // ==================== DOCTOR FUNCTIONS ====================

        // Display doctors in table
        function displayDoctors(doctorsToShow) {
            const tbody = document.getElementById('doctorsTableBody');
            tbody.innerHTML = '';

            doctorsToShow.forEach(doctor => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${doctor.name}</strong></td>
                    <td>${doctor.department}</td>
                    <td>${doctor.specialization}</td>
                    <td>${doctor.email}<br><small>${doctor.phone || ''}</small></td>
                    <td>${doctor.experience || 0} years</td>
                    <td><span class="status ${doctor.status || 'active'}">${doctor.status || 'active'}</span></td>
                    <td>
                        <button class="btn-icon view" onclick="viewDoctor(${doctor.id})" title="View"><i class="fas fa-eye"></i></button>
                        <button class="btn-icon edit" onclick="editDoctor(${doctor.id})" title="Edit"><i class="fas fa-edit"></i></button>
                        <button class="btn-icon delete" onclick="deleteDoctor(${doctor.id})" title="Delete"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            updateDoctorStats();
        }

        // Add doctor
        function addDoctor(event) {
            event.preventDefault();
            
            const doctorData = {
                id: doctors.length + 1,
                name: document.getElementById('doctorName').value,
                email: document.getElementById('doctorEmail').value,
                phone: document.getElementById('doctorPhone').value,
                department: document.getElementById('doctorDepartment').value,
                specialization: document.getElementById('doctorSpecialization').value,
                experience: parseInt(document.getElementById('doctorExperience').value),
                status: 'active'
            };

            doctors.push(doctorData);
            closeModal('addDoctorModal');
            displayDoctors(doctors);
            addNotification('Doctor added successfully!', 'success');
            updateDashboardStats();
        }

        // Edit doctor
        function editDoctor(id) {
            const doctor = doctors.find(d => d.id === id);
            if (doctor) {
                document.getElementById('editDoctorId').value = doctor.id;
                document.getElementById('editDoctorName').value = doctor.name;
                document.getElementById('editDoctorEmail').value = doctor.email;
                document.getElementById('editDoctorPhone').value = doctor.phone;
                document.getElementById('editDoctorDepartment').value = doctor.department;
                document.getElementById('editDoctorSpecialization').value = doctor.specialization;
                document.getElementById('editDoctorExperience').value = doctor.experience;
                document.getElementById('editDoctorStatus').value = doctor.status;
                openModal('editDoctorModal');
            }
        }

        // Update doctor
        function updateDoctor(event) {
            event.preventDefault();
            
            const id = parseInt(document.getElementById('editDoctorId').value);
            const index = doctors.findIndex(d => d.id === id);
            
            if (index !== -1) {
                doctors[index] = {
                    id: id,
                    name: document.getElementById('editDoctorName').value,
                    email: document.getElementById('editDoctorEmail').value,
                    phone: document.getElementById('editDoctorPhone').value,
                    department: document.getElementById('editDoctorDepartment').value,
                    specialization: document.getElementById('editDoctorSpecialization').value,
                    experience: parseInt(document.getElementById('editDoctorExperience').value),
                    status: document.getElementById('editDoctorStatus').value
                };
                
                closeModal('editDoctorModal');
                displayDoctors(doctors);
                addNotification('Doctor updated successfully!', 'success');
                updateDashboardStats();
            }
        }

        // View doctor
        function viewDoctor(id) {
            const doctor = doctors.find(d => d.id === id);
            if (doctor) {
                document.getElementById('viewDoctorName').textContent = doctor.name;
                document.getElementById('viewDoctorEmail').textContent = doctor.email;
                document.getElementById('viewDoctorPhone').textContent = doctor.phone;
                document.getElementById('viewDoctorDepartment').textContent = doctor.department;
                document.getElementById('viewDoctorSpecialization').textContent = doctor.specialization;
                document.getElementById('viewDoctorExperience').textContent = doctor.experience + ' years';
                document.getElementById('viewDoctorStatus').textContent = doctor.status;
                openModal('viewDoctorModal');
            }
        }

        // Delete doctor
        function deleteDoctor(id) {
            if (confirm('Are you sure you want to delete this doctor?')) {
                doctors = doctors.filter(d => d.id != id);
                displayDoctors(doctors);
                addNotification('Doctor deleted successfully!', 'success');
                updateDashboardStats();
            }
        }

        // Search doctors
        function searchDoctors() {
            const searchTerm = document.getElementById('doctorSearch').value.toLowerCase();
            const filtered = doctors.filter(doctor => 
                doctor.name.toLowerCase().includes(searchTerm) ||
                doctor.department.toLowerCase().includes(searchTerm) ||
                doctor.specialization.toLowerCase().includes(searchTerm) ||
                doctor.email.toLowerCase().includes(searchTerm)
            );
            displayDoctors(filtered);
        }

        // Filter doctors
        function filterDoctors() {
            const department = document.getElementById('doctorDepartmentFilter').value;
            if (department) {
                const filtered = doctors.filter(doctor => doctor.department === department);
                displayDoctors(filtered);
            } else {
                displayDoctors(doctors);
            }
        }

        // ==================== RECEPTIONIST FUNCTIONS ====================

        // Display receptionists
        function displayReceptionists(receptionistsToShow) {
            const tbody = document.getElementById('receptionistsTableBody');
            tbody.innerHTML = '';

            receptionistsToShow.forEach(rec => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${rec.name}</strong></td>
                    <td>${rec.email}</td>
                    <td>${rec.phone}</td>
                    <td>${rec.shift}</td>
                    <td>${new Date(rec.created_at).toLocaleDateString()}</td>
                    <td><span class="status ${rec.status || 'active'}">${rec.status || 'active'}</span></td>
                    <td>
                        <button class="btn-icon view" onclick="viewReceptionist(${rec.id})" title="View"><i class="fas fa-eye"></i></button>
                        <button class="btn-icon edit" onclick="editReceptionist(${rec.id})" title="Edit"><i class="fas fa-edit"></i></button>
                        <button class="btn-icon delete" onclick="deleteReceptionist(${rec.id})" title="Delete"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            updateReceptionistStats();
        }

        // Add receptionist
        function addReceptionist(event) {
            event.preventDefault();
            
            const recData = {
                id: receptionists.length + 1,
                name: document.getElementById('receptionistName').value,
                email: document.getElementById('receptionistEmail').value,
                phone: document.getElementById('receptionistPhone').value,
                shift: document.getElementById('receptionistShift').value,
                created_at: new Date().toISOString(),
                status: 'active'
            };

            receptionists.push(recData);
            closeModal('addReceptionistModal');
            displayReceptionists(receptionists);
            addNotification('Receptionist added successfully!', 'success');
            updateDashboardStats();
        }

        // Edit receptionist
        function editReceptionist(id) {
            const rec = receptionists.find(r => r.id === id);
            if (rec) {
                document.getElementById('editReceptionistId').value = rec.id;
                document.getElementById('editReceptionistName').value = rec.name;
                document.getElementById('editReceptionistEmail').value = rec.email;
                document.getElementById('editReceptionistPhone').value = rec.phone;
                document.getElementById('editReceptionistShift').value = rec.shift;
                document.getElementById('editReceptionistStatus').value = rec.status;
                openModal('editReceptionistModal');
            }
        }

        // Update receptionist
        function updateReceptionist(event) {
            event.preventDefault();
            
            const id = parseInt(document.getElementById('editReceptionistId').value);
            const index = receptionists.findIndex(r => r.id === id);
            
            if (index !== -1) {
                receptionists[index] = {
                    id: id,
                    name: document.getElementById('editReceptionistName').value,
                    email: document.getElementById('editReceptionistEmail').value,
                    phone: document.getElementById('editReceptionistPhone').value,
                    shift: document.getElementById('editReceptionistShift').value,
                    created_at: receptionists[index].created_at,
                    status: document.getElementById('editReceptionistStatus').value
                };
                
                closeModal('editReceptionistModal');
                displayReceptionists(receptionists);
                addNotification('Receptionist updated successfully!', 'success');
                updateDashboardStats();
            }
        }

        // View receptionist
        function viewReceptionist(id) {
            const rec = receptionists.find(r => r.id === id);
            if (rec) {
                document.getElementById('viewReceptionistName').textContent = rec.name;
                document.getElementById('viewReceptionistEmail').textContent = rec.email;
                document.getElementById('viewReceptionistPhone').textContent = rec.phone;
                document.getElementById('viewReceptionistShift').textContent = rec.shift;
                document.getElementById('viewReceptionistJoinDate').textContent = new Date(rec.created_at).toLocaleDateString();
                document.getElementById('viewReceptionistStatus').textContent = rec.status;
                openModal('viewReceptionistModal');
            }
        }

        // Delete receptionist
        function deleteReceptionist(id) {
            if (confirm('Are you sure you want to delete this receptionist?')) {
                receptionists = receptionists.filter(r => r.id != id);
                displayReceptionists(receptionists);
                addNotification('Receptionist deleted successfully!', 'success');
                updateDashboardStats();
            }
        }

        // Search receptionists
        function searchReceptionists() {
            const searchTerm = document.getElementById('receptionistSearch').value.toLowerCase();
            const filtered = receptionists.filter(rec => 
                rec.name.toLowerCase().includes(searchTerm) ||
                rec.email.toLowerCase().includes(searchTerm) ||
                rec.phone.includes(searchTerm)
            );
            displayReceptionists(filtered);
        }

        // Filter receptionists
        function filterReceptionists() {
            const shift = document.getElementById('receptionistShiftFilter').value;
            if (shift) {
                const filtered = receptionists.filter(rec => rec.shift === shift);
                displayReceptionists(filtered);
            } else {
                displayReceptionists(receptionists);
            }
        }

        // ==================== DASHBOARD FUNCTIONS ====================

        // Update dashboard stats
        function updateDashboardStats() {
            document.getElementById('totalDoctors').textContent = doctors.length;
            document.getElementById('totalReceptionists').textContent = receptionists.length;
        }

        // Load dashboard data
        function loadDashboardData() {
            updateDashboardStats();
            document.getElementById('todayAppointments').textContent = Math.floor(Math.random() * 50) + 20;
            document.getElementById('todayAppointmentsStat').textContent = document.getElementById('todayAppointments').textContent;
            document.getElementById('totalPatients').textContent = Math.floor(Math.random() * 1000) + 500;
            document.getElementById('monthlyRevenue').textContent = '$' + (Math.floor(Math.random() * 50000) + 20000).toLocaleString();
            document.getElementById('systemUptime').textContent = '99.9%';

            // Load recent activity
            loadRecentActivity();

            // Initialize dashboard charts
            initDashboardCharts();
        }

        // Load recent activity
        function loadRecentActivity() {
            const activities = [
                { icon: 'user-md', text: 'New doctor joined - Dr. Sarah Johnson', time: '5 min ago' },
                { icon: 'calendar-check', text: 'Appointment completed - Patient #1234', time: '15 min ago' },
                { icon: 'user-plus', text: 'New patient registered - Michael Brown', time: '30 min ago' },
                { icon: 'credit-card', text: 'Subscription renewed - Professional Plan', time: '1 hour ago' },
                { icon: 'user-tie', text: 'Receptionist shift started - Emma Watson', time: '2 hours ago' }
            ];

            const activityList = document.getElementById('activityList');
            activityList.innerHTML = '';

            activities.forEach(activity => {
                const div = document.createElement('div');
                div.className = 'activity-item';
                div.innerHTML = `
                    <div class="activity-icon">
                        <i class="fas fa-${activity.icon}"></i>
                    </div>
                    <div class="activity-details">
                        <h4>${activity.text}</h4>
                        <p>${activity.time}</p>
                    </div>
                `;
                activityList.appendChild(div);
            });
        }

        // ==================== ANALYTICS FUNCTIONS ====================

        // Load analytics data
        function loadAnalytics() {
            // Generate random data for demo
            const appointments = Math.floor(Math.random() * 500) + 200;
            const revenue = Math.floor(Math.random() * 100000) + 50000;
            const newPatients = Math.floor(Math.random() * 100) + 50;
            const satisfaction = (Math.random() * 1 + 4).toFixed(1);

            document.getElementById('totalAppointments').textContent = appointments;
            document.getElementById('totalRevenue').textContent = '$' + revenue.toLocaleString();
            document.getElementById('newPatients').textContent = newPatients;
            document.getElementById('satisfactionRate').textContent = satisfaction;

            document.getElementById('appointmentChange').textContent = '+' + (Math.random() * 20).toFixed(1) + '%';
            document.getElementById('revenueChange').textContent = '+' + (Math.random() * 25).toFixed(1) + '%';
            document.getElementById('patientChange').textContent = '+' + (Math.random() * 15).toFixed(1) + '%';
            document.getElementById('satisfactionChange').textContent = '+' + (Math.random() * 0.5).toFixed(1);

            // Initialize charts
            initAnalyticsCharts();

            // Load top doctors
            loadTopDoctors();
            loadPopularDepartments();
        }

        // Initialize dashboard charts
        function initDashboardCharts() {
            // Visits chart
            const visitsCtx = document.getElementById('dashboardVisitsChart')?.getContext('2d');
            if (visitsCtx) {
                if (charts.dashboardVisits) charts.dashboardVisits.destroy();
                charts.dashboardVisits = new Chart(visitsCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Patient Visits',
                            data: Array.from({length: 7}, () => Math.floor(Math.random() * 50) + 20),
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37,99,235,0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { font: { size: 11 } } }
                        }
                    }
                });
            }

            // Revenue chart
            const revenueCtx = document.getElementById('dashboardRevenueChart')?.getContext('2d');
            if (revenueCtx) {
                if (charts.dashboardRevenue) charts.dashboardRevenue.destroy();
                charts.dashboardRevenue = new Chart(revenueCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Revenue ($)',
                            data: Array.from({length: 7}, () => Math.floor(Math.random() * 5000) + 2000),
                            backgroundColor: '#10b981'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { font: { size: 11 } } }
                        }
                    }
                });
            }
        }

        // Initialize analytics charts
        function initAnalyticsCharts() {
            // Visits chart
            const visitsCtx = document.getElementById('visitsChart')?.getContext('2d');
            if (visitsCtx) {
                if (charts.visits) charts.visits.destroy();
                charts.visits = new Chart(visitsCtx, {
                    type: 'line',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                        datasets: [{
                            label: 'Patient Visits',
                            data: Array.from({length: 4}, () => Math.floor(Math.random() * 200) + 100),
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37,99,235,0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { font: { size: 11 } } }
                        }
                    }
                });
            }

            // Revenue chart
            const revenueCtx = document.getElementById('revenueChart')?.getContext('2d');
            if (revenueCtx) {
                if (charts.revenue) charts.revenue.destroy();
                charts.revenue = new Chart(revenueCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                        datasets: [{
                            label: 'Revenue ($)',
                            data: Array.from({length: 4}, () => Math.floor(Math.random() * 20000) + 10000),
                            backgroundColor: '#10b981'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { font: { size: 11 } } }
                        }
                    }
                });
            }

            // Department chart
            const deptCtx = document.getElementById('departmentChart')?.getContext('2d');
            if (deptCtx) {
                if (charts.department) charts.department.destroy();
                charts.department = new Chart(deptCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Cardiology', 'Neurology', 'Pediatrics', 'Orthopedics', 'Dermatology'],
                        datasets: [{
                            data: [30, 20, 25, 15, 10],
                            backgroundColor: ['#2563eb', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { font: { size: 11 } } }
                        }
                    }
                });
            }

            // Peak hours chart
            const peakCtx = document.getElementById('peakHoursChart')?.getContext('2d');
            if (peakCtx) {
                if (charts.peak) charts.peak.destroy();
                charts.peak = new Chart(peakCtx, {
                    type: 'line',
                    data: {
                        labels: ['8AM', '10AM', '12PM', '2PM', '4PM', '6PM', '8PM'],
                        datasets: [{
                            label: 'Patient Load',
                            data: [15, 35, 45, 40, 30, 25, 10],
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245,158,11,0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { font: { size: 11 } } }
                        }
                    }
                });
            }
        }

        // Load top doctors
        function loadTopDoctors() {
            const tbody = document.getElementById('topDoctorsBody');
            tbody.innerHTML = '';

            const topDoctors = [
                { name: 'Dr. John Smith', patients: 145, revenue: 15200 },
                { name: 'Dr. Sarah Johnson', patients: 132, revenue: 14800 },
                { name: 'Dr. Michael Brown', patients: 128, revenue: 13500 },
                { name: 'Dr. Emily Davis', patients: 118, revenue: 12200 },
                { name: 'Dr. David Wilson', patients: 105, revenue: 11000 }
            ];

            topDoctors.forEach(doctor => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${doctor.name}</td>
                    <td>${doctor.patients}</td>
                    <td>$${doctor.revenue.toLocaleString()}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Load popular departments
        function loadPopularDepartments() {
            const tbody = document.getElementById('popularDepartmentsBody');
            tbody.innerHTML = '';

            const departments = [
                { name: 'Cardiology', appointments: 324, growth: '+12%' },
                { name: 'Pediatrics', appointments: 287, growth: '+8%' },
                { name: 'Neurology', appointments: 245, growth: '+15%' },
                { name: 'Orthopedics', appointments: 198, growth: '+5%' },
                { name: 'Dermatology', appointments: 156, growth: '+10%' }
            ];

            departments.forEach(dept => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${dept.name}</td>
                    <td>${dept.appointments}</td>
                    <td><span class="kpi-change positive">${dept.growth}</span></td>
                `;
                tbody.appendChild(row);
            });
        }

        // Date range functions
        function changeDateRange(range) {
            document.querySelectorAll('.range-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            loadAnalytics();
            addNotification(`Analytics updated for ${range} range`, 'info');
        }

        function applyCustomDate() {
            const start = document.getElementById('startDate').value;
            const end = document.getElementById('endDate').value;
            if (start && end) {
                addNotification(`Analytics applied for custom range: ${start} to ${end}`, 'success');
                loadAnalytics();
            } else {
                alert('Please select both start and end dates');
            }
        }

        // ==================== SUBSCRIPTION FUNCTIONS ====================

        // Change billing period
        function changeBillingPeriod(period) {
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const basicPrice = document.getElementById('basicPrice');
            const proPrice = document.getElementById('professionalPrice');
            const enterprisePrice = document.getElementById('enterprisePrice');

            if (period === 'yearly') {
                basicPrice.textContent = '950';
                proPrice.textContent = '1910';
                enterprisePrice.textContent = '3830';
                document.querySelectorAll('.period').forEach(el => el.textContent = '/year');
            } else {
                basicPrice.textContent = '99';
                proPrice.textContent = '199';
                enterprisePrice.textContent = '399';
                document.querySelectorAll('.period').forEach(el => el.textContent = '/month');
            }
        }

        // Select plan
        function selectPlan(plan) {
            document.querySelectorAll('.plan-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('currentPlan').textContent = plan.charAt(0).toUpperCase() + plan.slice(1) + ' Plan';
            addNotification(`Switched to ${plan} plan`, 'info');
        }

        // Load billing history
        function loadBillingHistory() {
            const tbody = document.getElementById('billingHistoryBody');
            tbody.innerHTML = '';

            const history = [
                { date: '2024-01-01', invoice: 'INV-001', plan: 'Professional', amount: 199, status: 'Paid' },
                { date: '2023-12-01', invoice: 'INV-002', plan: 'Professional', amount: 199, status: 'Paid' },
                { date: '2023-11-01', invoice: 'INV-003', plan: 'Professional', amount: 199, status: 'Paid' },
                { date: '2023-10-01', invoice: 'INV-004', plan: 'Basic', amount: 99, status: 'Paid' },
                { date: '2023-09-01', invoice: 'INV-005', plan: 'Basic', amount: 99, status: 'Paid' }
            ];

            history.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.date}</td>
                    <td>${item.invoice}</td>
                    <td>${item.plan}</td>
                    <td>$${item.amount}</td>
                    <td><span class="status ${item.status.toLowerCase()}">${item.status}</span></td>
                    <td><button class="btn-icon" onclick="downloadInvoice('${item.invoice}')" title="Download"><i class="fas fa-download"></i></button></td>
                `;
                tbody.appendChild(row);
            });
        }

        // ==================== SYSTEM MONITORING FUNCTIONS ====================

        // Start system monitoring
        function startSystemMonitoring() {
            // Update every 5 seconds
            setInterval(updateSystemMetrics, 5000);
            
            // Initialize user activity chart
            initUserActivityChart();
            
            // Add initial logs
            addSystemLog('System started', 'success');
        }

        // Update system metrics
        function updateSystemMetrics() {
            const cpu = Math.floor(Math.random() * 60) + 20;
            const memory = Math.floor(Math.random() * 50) + 30;
            const disk = Math.floor(Math.random() * 40) + 20;

            document.getElementById('cpuUsage').textContent = cpu + '%';
            document.getElementById('cpuProgress').style.width = cpu + '%';
            
            document.getElementById('memoryUsage').textContent = memory + '%';
            document.getElementById('memoryProgress').style.width = memory + '%';
            
            document.getElementById('diskUsage').textContent = disk + '%';
            document.getElementById('diskProgress').style.width = disk + '%';

            document.getElementById('uptime').textContent = Math.floor(Math.random() * 30) + 1 + ' days';
            document.getElementById('responseTime').textContent = Math.floor(Math.random() * 200) + 50 + 'ms';

            // Update active users
            document.getElementById('activeDoctors').textContent = doctors.length;
            document.getElementById('activeReceptionists').textContent = receptionists.length;
            document.getElementById('activePatients').textContent = Math.floor(Math.random() * 30) + 10;

            // Add random log
            if (Math.random() > 0.7) {
                const logs = [
                    { type: 'info', message: 'Database backup completed successfully' },
                    { type: 'warning', message: 'High CPU usage detected' },
                    { type: 'success', message: 'New user registered in the system' },
                    { type: 'info', message: 'Weekly report generated' }
                ];
                const log = logs[Math.floor(Math.random() * logs.length)];
                addSystemLog(log.message, log.type);
            }

            // Update user activity chart
            updateUserActivityChart();
        }

        // Initialize user activity chart
        function initUserActivityChart() {
            const ctx = document.getElementById('userActivityChart')?.getContext('2d');
            if (ctx) {
                if (charts.userActivity) charts.userActivity.destroy();
                charts.userActivity = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['12AM', '4AM', '8AM', '12PM', '4PM', '8PM'],
                        datasets: [{
                            label: 'Active Users',
                            data: Array.from({length: 6}, () => Math.floor(Math.random() * 20) + 5),
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139,92,246,0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { font: { size: 11 } } }
                        }
                    }
                });
            }
        }

        // Update user activity chart
        function updateUserActivityChart() {
            if (charts.userActivity) {
                charts.userActivity.data.datasets[0].data = Array.from({length: 6}, () => Math.floor(Math.random() * 20) + 5);
                charts.userActivity.update();
            }
        }

        // Add system log
        function addSystemLog(message, type = 'info') {
            const logsContainer = document.getElementById('logsContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            
            const time = new Date().toLocaleTimeString();
            logEntry.innerHTML = `<span>[${time}] ${message}</span>`;
            
            logsContainer.insertBefore(logEntry, logsContainer.firstChild);
            
            // Keep only last 20 logs
            while (logsContainer.children.length > 20) {
                logsContainer.removeChild(logsContainer.lastChild);
            }
        }

        // ==================== NOTIFICATION FUNCTIONS ====================

        // Add notification
        function addNotification(message, type = 'info') {
            const notification = {
                id: Date.now(),
                message: message,
                type: type,
                time: new Date().toLocaleTimeString(),
                read: false
            };
            
            notifications.unshift(notification);
            updateNotificationBadge();
            displayNotifications();
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                const index = notifications.findIndex(n => n.id === notification.id);
                if (index > -1) {
                    notifications.splice(index, 1);
                    updateNotificationBadge();
                    displayNotifications();
                }
            }, 5000);
        }

        // Update notification badge
        function updateNotificationBadge() {
            const unreadCount = notifications.filter(n => !n.read).length;
            document.getElementById('notificationBadge').textContent = unreadCount;
        }

        // Display notifications
        function displayNotifications() {
            const list = document.getElementById('notificationList');
            list.innerHTML = '';

            notifications.forEach(notification => {
                const item = document.createElement('div');
                item.className = `notification-item ${!notification.read ? 'unread' : ''}`;
                item.innerHTML = `
                    <i class="fas fa-${notification.type === 'success' ? 'check-circle' : notification.type === 'warning' ? 'exclamation-triangle' : 'info-circle'}" style="color: ${notification.type === 'success' ? '#10b981' : notification.type === 'warning' ? '#f59e0b' : '#2563eb'}"></i>
                    <div>
                        <p>${notification.message}</p>
                        <small>${notification.time}</small>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        // Mark all as read
        function markAllRead() {
            notifications.forEach(n => n.read = true);
            updateNotificationBadge();
            displayNotifications();
            addNotification('All notifications marked as read', 'info');
        }

        // ==================== UTILITY FUNCTIONS ====================

        // Update doctor stats
        function updateDoctorStats() {
            document.getElementById('totalDoctors').textContent = doctors.length;
        }

        // Update receptionist stats
        function updateReceptionistStats() {
            document.getElementById('totalReceptionists').textContent = receptionists.length;
        }

        // Handle global search
        function handleSearch() {
            const searchTerm = document.getElementById('globalSearch').value.toLowerCase();
            const activeSection = document.querySelector('.section.active').id;
            
            if (activeSection === 'doctors') {
                const filtered = doctors.filter(doctor => 
                    doctor.name.toLowerCase().includes(searchTerm) ||
                    doctor.department.toLowerCase().includes(searchTerm) ||
                    doctor.specialization.toLowerCase().includes(searchTerm) ||
                    doctor.email.toLowerCase().includes(searchTerm)
                );
                displayDoctors(filtered);
            } else if (activeSection === 'receptionists') {
                const filtered = receptionists.filter(rec => 
                    rec.name.toLowerCase().includes(searchTerm) ||
                    rec.email.toLowerCase().includes(searchTerm) ||
                    rec.phone.includes(searchTerm)
                );
                displayReceptionists(filtered);
            }
        }

        // Download invoice
        function downloadInvoice(invoiceId) {
            addNotification(`Downloading invoice ${invoiceId}`, 'info');
        }

        // ==================== INITIALIZATION ====================

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateDate();
            
            // Display initial data
            displayDoctors(doctors);
            displayReceptionists(receptionists);
            
            // Close modals when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
                if (!e.target.closest('.notification-panel') && !e.target.closest('.notification-btn')) {
                    document.getElementById('notificationPanel').classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>